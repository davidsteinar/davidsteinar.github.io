var titles = [
"Arndal",
"Ævald",
"Amilíanna",
"Annelí",
"Antóní",
"Árbjarni",
"Árey",
"Arnald",
"Arnfinn",
"Auðbjarni",
"Auðfinna",
"Baggagægir",
"Baltas",
"Bergland",
"Bernhart",
"Birgill",
"Bjálfur",
"Bjarkrún",
"Bjórskelfir",
"Blævarr",
"Bláhvítur",
"Blámi",
"Blíðey",
"Blíðkvist",
"Brí",
"Broddur",
"Brynholt",
"Dáður",
"Dagbjörk",
"Danivald",
"Dimmur",
"Djöflaskötuselsbróðir",
"Dvali",
"Eikir",
"Eldúlfur",
"Eldþórunn",
"Elliljót",
"Engilbjörg",
"Faldi",
"Farfingur",
"Finnrún",
"Fjalldóra",
"Framfúsi",
"Frankell",
"Friðfaxi",
"Friðlóa",
"Fróður",
"Gaddabakur",
"Ginna",
"Glóbjörg",
"Glóri",
"Gráðvaldur",
"Griðberg",
"Grjótólfur",
"Grjótur",
"Guðbert",
"Guðbjörk",
"Gullinstjarna",
"Hákur",
"Hallærína",
"Hallbjört",
"Hálmþór",
"Heiðdal",
"Heildán",
"Himinljótur",
"Hindís",
"Hrafnberg",
"Hraunberg",
"Hrolli",
"Hrossaskelfir",
"Hrúni",
"Ísmundur",
"Jarphéðinn",
"Júlíant",
"Ketilbjört",
"Kolskeggi",
"Kristvald",
"Leobert",
"Lísabeth",
"Ljósbjört",
"Loðmey",
"Loðmundur",
"Lóra",
"Lúa",
"Maírós",
"Manney",
"Marina",
"Mekka",
"Natalín",
"Niðúlfur",
"Nóri",
"Nývarður",
"Oddbert",
"Ögmar",
"Ósvald",
"Parísól",
"Ráður",
"Ragnbjört",
"Reginleifur",
"Rögni",
"Rómen",
"Sakaría",
"Salvin",
"Sanni",
"Sigurlind",
"Sigurvaldur",
"Sigvaldur",
"Skæring",
"Skeggvi",
"Skráinn",
"Skrákur",
"Sléttbakur",
"Snæbergur",
"Snæbergur",
"Snæring",
"Snæringur",
"Sokkalína",
"Sólbert",
"Steinbjört",
"Steinfinnur",
"Steinröðull",
"Steinskuggi",
"Steinvar",
"Sumarlín",
"Sveinmann",
"Tjörvar",
"Tóði",
"Trjóni",
"Trúðmar",
"Týri",
"Unnbjörn",
"Valbert",
"Valdafeykir",
"Véfríður",
"Vígull",
"Vitlingur",
"Vormóði",
"Yngvald",
"Þambi",
"Þjóðleikur",
"Þjólfur",
"Þorbjartur",
"Þorgísli",
"Þorleikur",
"Þrámur",
"Þrúðvík",
"Glitfari",
"Frostmundur",
"Bláfjöður",
"Hnútur",
"Djarfur",
"Dáði",
"Fjalgeir",
"Fráni",
"Geigur",
"Geitill",
"Glómandi",
"Grátoppur",
"Gyllingur",
"Kálfinnur",
"Lummusníkir",
"Skjálfi",
"Vindsvali",
"Blíð",
"Hrafnketill",
"Glenni",
"Gráfa",
"Hlökkvi",
"Hásteinn",
"Bærir",
"Draumfari",
"Glitfaxi",
"Hrímir",
"Vorblíða",
"Angurboði",
"Bríella",
"Ljósborg",
"Lýdíana",
"Miðdís",
"Randalína",
"Rósmarína",
"Skálmey",
"Henrikka",
"Himinbjört",
"Amí",
"Erpa",
"Eygg",
"Hería",
"Irmey",
"Ljómey",
"Lía",
"Móni",
"Valína",
"Ásvaki",
"Bokki",
"Sæval",
"Blosi",
"Blæþór",
"Dagberg",
"Fossi",
"Fáfeldur",
"Engilbjörg",
"Brimdal",
"Eldlilja",
"Andrímur",
"Auðólfur",
"Beinrekur",
"Barnskelfir",
"Frárekur",
"Nípingur",
"Skreppur",
"Skráinn",
"Alvía",
"Blævind",
"Dalbogi",
"Dorian",
"Muggi",
"Nadian",
"Salía",
"Vopnir",
"Vísól",
"Álfdal",
"Oddberg",
"Valía",
"Þórsteinar",
"Eldþór",
"Lórent",
"Lyngþóra",
"Bergnýr",
"Sveindór",
"Dimmalimma",
"Dimmalimmalind",
"Freki",
"Kristan",
"Albert Eysteinn"
];

var terminals = {};
var startwords = [];
var wordstats = {};

for (var i = 0; i < titles.length; i++) {
    var words = titles[i].split(' ');
    terminals[words[words.length-1]] = true;
    startwords.push(words[0]);
    for (var j = 0; j < words.length - 1; j++) {
        if (wordstats.hasOwnProperty(words[j])) {
            wordstats[words[j]].push(words[j+1]);
        } else {
            wordstats[words[j]] = [words[j+1]];
        }
    }
}

var choice = function (a) {
    var i = Math.floor(a.length * Math.random());
    return a[i];
};

var make_title = function (min_length) {
    word = choice(startwords);
    var title = [word];
    while (wordstats.hasOwnProperty(word)) {
        var next_words = wordstats[word];
        word = choice(next_words);
        title.push(word);
        if (title.length > min_length && terminals.hasOwnProperty(word)) break;
    }
    if (title.length < min_length) return make_title(min_length);
    return title.join(' ');
};

function myFunction() {
    document.getElementById("demo").innerHTML = make_title(1); //make_title(3 + Math.floor(3 * Math.random()));
}
